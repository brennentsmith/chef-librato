LoadPlugin java

Include "/opt/collectd/share/collectd/jvm_default.conf"

<Plugin "java">
  <Plugin "GenericJMX">
    <Connection>
      Host "<%= @host %>"
      ServiceURL "<%= @service_url %>"
      Collect "memory_heap"
      Collect "memory_nonheap"
      Collect "classes"
      Collect "threads"
      Collect "compilation"
      Collect "garbage_collector"
      Collect "memory_pool"
    </Connection>
<% if !@mbeans.empty? %>
  <% @mbeans.each do |mbean| %>
    <MBean "<%= mbean['name'] %>">
      ObjectName "<%= mbean['object_name'] %>"
      InstancePrefix "<%= mbean['instance_prefix'] %>"

    <% @mbeans['values'].each do |value| %>
      <Value>
        Type "<%= value['type'] %>"
        Table <%= value['table'] %>
        Attribute "<%= value['attribute'] %>"
      </Value>
    <% end %>
    </MBean>
  <% end %>
<% end %>
  </Plugin>
</Plugin>
